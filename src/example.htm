<html>
    <head>
        <title>GitHubTicker example</title>
        <script src="//code.jquery.com/jquery-2.1.0.min.js"></script>
        <script src="//code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.3.0/handlebars.js"></script>
        <script src="js/githubticker.js"></script>

        <link rel="stylesheet" type="text/css" href="css/githubticker.css" />
    </head>
    <body>
        <div id="gh-ticker" data-user="fat" data-interval-ms="5000">
            
        </div>

        <script type="text/x-handlebars-template" id="gh-ticker-template">
            <ul>
                {{#each items}}
                <li id="gh-ticker-item-{{@index}}">
                    {{partialFor type}}
                    <div class="dateline">{{dateAndTime created_at}}</div>
                </li>
                {{else}}
                <li>
                    No recent GitHub activity
                </li>
                {{/each}}
            </ul>
        </script>

        <script type="text/x-handlebars-template" id="gh-ticker-CreateEvent-partial">
            {{#ifeq payload.ref_type "repository"}}
                <span class="action">Created repository <a href="{{repoUrl repo.name}}">{{repo.name}}</a></span>
                {{#if payload.description}}
                <span class="comment">{{payload.description}}</span>
                {{/if}}
            {{/ifeq}}

            {{#ifeq payload.ref_type "branch"}}
            <span class="action">Created branch <a href="{{branchUrl repo.name payload.ref}}">{{payload.ref}}</a> at <a href="{{repoUrl repo.name}}">{{repo.name}}</a></span>
            {{/ifeq}}

            {{#ifeq payload.ref_type "tag"}}
            <span class="action">Created tag <a href="{{tagUrl repo.name payload.ref}}">{{payload.ref}}</a> at <a href="{{repoUrl repo.name}}">{{repo.name}}</a></span>
            {{/ifeq}}
        </script>

        <script type="text/x-handlebars-template" id="gh-ticker-FollowEvent-partial">
            <span class="action">Followed 
                <a href="{{payload.target.html_url}}">
                {{#if payload.target.name }}
                    {{payload.target.name}} ({{payload.target.login}})
                {{else}}
                    {{payload.target.login}}
                {{/if}}
                </a>
            </span>
            {{#if payload.target.bio}}
            <span class="comment">{{payload.target.bio}}</span>
            {{/if}}
        </script>

        <script type="text/x-handlebars-template" id="gh-ticker-ForkEvent-partial">
            <span class="action">Forked repository <a href="{{repoUrl repo.name}}">{{repo.name}}</a> to <a href="{{payload.forkee.html_url}}">{{payload.forkee.full_name}}</a></span>
            {{#if payload.forkee.description}}
            <span class="comment">{{payload.forkee.description}}</span>
            {{/if}}
        </script>

        <script type="text/x-handlebars-template" id="gh-ticker-IssueCommentEvent-partial">
            <span class="action">Commented on issue <a href="{{payload.issue.html_url}}">{{repo.name}}#{{payload.issue.number}}</a> - {{payload.issue.title}}</span>
            <span class="comment">{{payload.comment.body}}</span>
        </script>

        <script type="text/x-handlebars-template" id="gh-ticker-IssuesEvent-partial">
            <span class="action">{{capitalise payload.action}} issue <a href="{{payload.issue.html_url}}">{{repo.name}}#{{payload.issue.number}}</a></span>
            <span class="comment">{{payload.issue.title}}</span>
        </script>

        <script type="text/x-handlebars-template" id="gh-ticker-PullRequestEvent-partial">
            <span class="action">
                {{#ifeq payload.action "opened"}}Opened{{/ifeq}}
                {{#ifeq payload.action "closed"}}Closed{{/ifeq}}
                {{#ifeq payload.action "synchronize"}}Synchronised{{/ifeq}}
                {{#ifeq payload.action "reopened"}}Re-opened{{/ifeq}}
                &nbsp;a <a href="{{payload.pull_request.html_url}}">pull request</a> to <a href="{{repoUrl repo.name}}">{{repo.name}}</a>
            </span>
            {{#if payload.pull_request.body}}
            <span>{{payload.pull_request.body}}</span>
            {{/if}}
        </script>

        <script type="text/x-handlebars-template" id="gh-ticker-PullRequestReviewCommentEvent-partial">
            <span class="action"><a href="{{payload.comment.html_url}}">Commented on a pull request</a> to <a href="{{repoUrl repo.name}}">{{repo.name}}</a></span>
            <span class="comment">{{payload.comment.body}}</span>
        </script>

        <script type="text/x-handlebars-template" id="gh-ticker-PushEvent-partial">
            <span class="action">
                Pushed {{payload.size}} {{pluralise payload.size "commit" "commits"}} to <a href="{{repoUrl repo.name}}">{{repo.name}}</a>
            </span>

            {{#if payload.commits.0.message}}
            <span class="comment">{{payload.commits.0.message}}</span>
            {{/if}}
        </script>

    </body>
</html>